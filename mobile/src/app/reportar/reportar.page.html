<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Reportar Resultado</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Reportar Resultado</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Registro de Marcador</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <form [formGroup]="resultForm" (ngSubmit)="onSubmit()">

        <ion-item>
          <ion-label position="floating">Seleccionar Partido</ion-label>
          <ion-select formControlName="gameId" placeholder="Partido">
            <ion-select-option *ngFor="let game of pendingGames$ | async" [value]="game.id">
              {{ game.home_team?.name }} vs {{ game.away_team?.name }}
            </ion-select-option>
          </ion-select>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Goles Local</ion-label>
          <ion-input type="number" formControlName="home_score" min="0"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Goles Visitante</ion-label>
          <ion-input type="number" formControlName="away_score" min="0"></ion-input>
        </ion-item>

        <ion-button 
          expand="full" 
          type="submit" 
          [disabled]="resultForm.invalid" 
          class="ion-margin-top"
        >
          Reportar Resultado
        </ion-button>
        
      </form>
    </ion-card-content>
  </ion-card>

  <ion-button 
    expand="full" 
    fill="outline"
    (click)="takePhoto()" 
    class="ion-margin-top ion-margin-horizontal"
  >
    <ion-icon name="camera" slot="start"></ion-icon>
    Tomar Foto 
  </ion-button>

  <div *ngIf="photoUrl" class="ion-padding-vertical ion-margin-horizontal">
    <h3 class="ion-text-center">Previsualizaci√≥n</h3>
    <ion-img [src]="photoUrl" style="max-height: 200px; object-fit: contain;"></ion-img>
  </div>

</ion-content>